import{_ as k,u as b,e as m,r as i,o as h,f as V,d as g,g as L,v as T,a,w as p,b as w,h as C}from"./index-4d70b208.js";import{a as x}from"./utilFunctions-c00a1675.js";const S={name:"Login",setup(){const u=b();let o=m(""),c=m(""),t=m(!1),d=m("");function _(l,e,n){const s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3);let v="expires="+s.toUTCString();document.cookie=l+"="+e+";"+v+";path=/"}async function f(){if(t.value){d.value="";let e=await(await fetch("/api/usuaris/login/admins/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:o.value,password:c.value})})).json();if(console.log("data: ",e),e.non_field_errors){let n="";for(let s of e.non_field_errors)n+=s+`
`;d.value=n}else e.token&&(_("Token",e.token,1),x(e.token),u.push("/Review"))}else{d.value="";let l=await fetch("/api/usuaris/login/organitzadors/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:o.value,password:c.value})});console.log("response: ",l);let e=await l.json();if(console.log("login org data: ",e),e.non_field_errors){let n="";for(let s of e.non_field_errors)n+=s+`
`;d.value=n}else e.token&&(_("Token",e.token,1),x(e.token),u.push("/edit"))}}return{username:o,password:c,admin:t,msgErrorLogin:d,doLogin:f}}},j={class:"background"},E={class:"fomrStyle"};function N(u,o,c,t,d,_){const f=i("v-alert"),l=i("v-card-title"),e=i("v-text-field"),n=i("v-switch"),s=i("v-btn"),v=i("v-card-text"),y=i("v-card");return h(),V("div",j,[g("div",null,[L(a(f,{class:"mx-3 my-3",density:"compact",type:"error",title:"Error login",text:t.msgErrorLogin},null,8,["text"]),[[T,t.msgErrorLogin!=""]])]),g("div",E,[a(y,{height:"600",width:"500",style:{"border-radius":"40px"}},{default:p(()=>[a(l,{class:"text-center mt-3"},{default:p(()=>[w("Login")]),_:1}),a(v,null,{default:p(()=>[a(e,{modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r),label:"Username",required:"",style:{"margin-top":"100px"}},null,8,["modelValue"]),a(e,{onKeydown:o[1]||(o[1]=C(r=>t.doLogin(),["enter"])),modelValue:t.password,"onUpdate:modelValue":o[2]||(o[2]=r=>t.password=r),label:"Password",type:"password",required:"",style:{"margin-top":"30px"}},null,8,["modelValue"]),a(n,{modelValue:t.admin,"onUpdate:modelValue":o[3]||(o[3]=r=>t.admin=r),label:"Admin",color:"success"},null,8,["modelValue"]),a(s,{onClick:o[4]||(o[4]=r=>t.doLogin()),color:"#2eca5a",class:"mx-auto d-block mt-16"},{default:p(()=>[w("Login")]),_:1})]),_:1})]),_:1})])])}const A=k(S,[["render",N],["__scopeId","data-v-e6cc52b6"]]);export{A as default};
