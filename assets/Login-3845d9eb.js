import{_ as k,u as b,e as p,r as i,o as h,f as V,d as g,g as L,v as T,a,w as u,b as w,h as C}from"./index-b3f5859b.js";import{a as x}from"./utilFunctions-c00a1675.js";const S={name:"Login",setup(){const _=b();let o=p(""),m=p(""),t=p(!1),d=p("");function f(c,s,e){const n=new Date;n.setTime(n.getTime()+e*24*60*60*1e3);let l="expires="+n.toUTCString();document.cookie=c+"="+s+";"+l+";path=/"}async function v(){let c="http://deploy-env.eba-6a6b2amf.us-west-2.elasticbeanstalk.com/";if(t.value){d.value="";let e=await(await fetch(c+"usuaris/login/admins/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:o.value,password:m.value})})).json();if(console.log("data: ",e),e.non_field_errors){let n="";for(let l of e.non_field_errors)n+=l+`
`;d.value=n}else e.token&&(f("Token",e.token,1),x(e.token),_.push("/Review"))}else{d.value="";let s=await fetch(c+"usuaris/login/organitzadors/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:o.value,password:m.value})});console.log("response: ",s);let e=await s.json();if(console.log("login org data: ",e),e.non_field_errors){let n="";for(let l of e.non_field_errors)n+=l+`
`;d.value=n}else e.token&&(f("Token",e.token,1),x(e.token),_.push("/edit"))}}return{username:o,password:m,admin:t,msgErrorLogin:d,doLogin:v}}},j={class:"background"},E={class:"fomrStyle"};function N(_,o,m,t,d,f){const v=i("v-alert"),c=i("v-card-title"),s=i("v-text-field"),e=i("v-switch"),n=i("v-btn"),l=i("v-card-text"),y=i("v-card");return h(),V("div",j,[g("div",null,[L(a(v,{class:"mx-3 my-3",density:"compact",type:"error",title:"Error login",text:t.msgErrorLogin},null,8,["text"]),[[T,t.msgErrorLogin!=""]])]),g("div",E,[a(y,{height:"600",width:"500",style:{"border-radius":"40px"}},{default:u(()=>[a(c,{class:"text-center mt-3"},{default:u(()=>[w("Login")]),_:1}),a(l,null,{default:u(()=>[a(s,{modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r),label:"Username",required:"",style:{"margin-top":"100px"}},null,8,["modelValue"]),a(s,{onKeydown:o[1]||(o[1]=C(r=>t.doLogin(),["enter"])),modelValue:t.password,"onUpdate:modelValue":o[2]||(o[2]=r=>t.password=r),label:"Password",type:"password",required:"",style:{"margin-top":"30px"}},null,8,["modelValue"]),a(e,{modelValue:t.admin,"onUpdate:modelValue":o[3]||(o[3]=r=>t.admin=r),label:"Admin",color:"success"},null,8,["modelValue"]),a(n,{onClick:o[4]||(o[4]=r=>t.doLogin()),color:"#2eca5a",class:"mx-auto d-block mt-16"},{default:u(()=>[w("Login")]),_:1})]),_:1})]),_:1})])])}const A=k(S,[["render",N],["__scopeId","data-v-08c97104"]]);export{A as default};
