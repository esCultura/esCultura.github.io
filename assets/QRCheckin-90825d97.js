import{s as o}from"./utilFunctions-c00a1675.js";import{_ as l,r as c,o as e,f as d,c as r,d as i,F as h}from"./index-0d58ce2e.js";const u={name:"QRCheckin",data(){return{entrada:{},estat:""}},methods:{async refrescaEntrada(){await o("assistencies/?uuid="+this.$route.params.id_entrada,"GET","").then(t=>this.entrada=t[0]),this.entrada.qr===null&&(this.estat="ko")},async checkin(){if(this.entrada.dataValidacio)this.estat="pre-ok";else{console.log("hola");let t={uuid:this.entrada.uuid,dataValidacio:new Date};o("assistencies/"+this.entrada.uuid+"/","PATCH",t).then(a=>this.entrada=a),this.estat="validada-ok"}}},async mounted(){await this.refrescaEntrada(),await this.checkin()}},k=i("br",null,null,-1),p=i("br",null,null,-1);function m(t,a,_,f,n,y){const s=c("v-alert");return e(),d(h,null,[n.estat==="validada-ok"?(e(),r(s,{key:0,title:"El checkin ha estat realitzat correctament",type:"success"})):n.estat==="pre-ok"?(e(),r(s,{key:1,title:"El checkin ja havia estat realitzat!",type:"warning"})):n.estat==="validada-ko"?(e(),r(s,{key:2,title:"Hi ha hagut un error realitzant el checkin",type:"error"})):(e(),r(s,{key:3,title:"No es pot mostrar aquesta entrada",type:"error"})),k,p,i("button",{class:"v-btn v-theme--light",onClick:a[0]||(a[0]=v=>t.$router.push({name:"qrValidator"}))},"ESCANEJAR UNA ALTRA ENTRADA")],64)}const C=l(u,[["render",m]]);export{C as default};
